# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ wgpu - –ü—Ä–æ–≥—Ä–µ—Å—Å

## –ü—Ä–æ–±–ª–µ–º–∞
–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –Ω–∞ macroquad –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç ~14 FPS –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ q3e –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1000 FPS –ø—Ä–∏ 8K —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏.

## –í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚úÖ

### 1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ wgpu
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `wgpu`, `winit`, `bytemuck`, `pollster`
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `src/wgpu_renderer/` —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
  - `renderer.rs` - –±–∞–∑–æ–≤—ã–π wgpu —Ä–µ–Ω–¥–µ—Ä–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π surface
  - `texture.rs` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∑–∞–≥—Ä—É–∑–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
  - `camera.rs` - 2D –∫–∞–º–µ—Ä–∞ —Å –ø—Ä–æ–µ–∫—Ü–∏–µ–π
  - `mesh.rs` - –≤–µ—Ä—Ç–µ–∫—Å—ã –∏ –º–µ—à–∏
  - `pipeline.rs` - render pipeline –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è
  - `uniforms.rs` - uniform –±—É—Ñ–µ—Ä—ã
  - `deferred_renderer.rs` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π deferred renderer –Ω–∞ wgpu

### 2. –®–µ–π–¥–µ—Ä—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω `lighting_shader.wgsl` - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–∑ GLSL —à–µ–π–¥–µ—Ä –æ—Å–≤–µ—â–µ–Ω–∏—è —Å:
  - –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π lightmap
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Å–≤–µ—Ç–∞ (–¥–æ 8)
  - –õ–∏–Ω–µ–π–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Å–≤–µ—Ç–∞
  - Ray-marching —Ç–µ–Ω—è–º–∏
  - –ú–µ—Ä—Ü–∞–Ω–∏–µ–º —Å–≤–µ—Ç–∞
  - HDR –∏ tone mapping

### 3. Deferred Renderer
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω `WgpuDeferredRenderer` —Å:
  - Render targets –¥–ª—è —Å—Ü–µ–Ω—ã –∏ –æ—Å–≤–µ—â–µ–Ω–∏—è
  - Lightmap (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ macroquad –≤ wgpu)
  - Obstacle texture –¥–ª—è —Ç–µ–Ω–µ–π
  - Dynamic light data texture
  - Linear light data texture
  - Uniform –±—É—Ñ–µ—Ä—ã
  - Bind groups
  - Fullscreen quad –¥–ª—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏

### 4. –ü—Ä–∏–º–µ—Ä—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/main_wgpu.rs` - –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è winit –≤–º–µ—Å—Ç–æ macroquad

### 5. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–π–ª–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω `WgpuTileRenderer` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–∞–π–ª–æ–≤ –∫–∞—Ä—Ç—ã
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç—É—Ä–∞–º–∏ —Ç–∞–π–ª–æ–≤
  - View-projection –º–∞—Ç—Ä–∏—Ü
  - –ë–∞–∑–æ–≤–æ–≥–æ batching
- ‚úÖ –°–æ–∑–¥–∞–Ω `tile_shader.wgsl` –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–∞–π–ª–æ–≤

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `WgpuRenderContext` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º:
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è deferred renderer
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è tile renderer
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MD3 renderer
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ render frame
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (—Ç–∞–π–ª—ã -> –æ—Å–≤–µ—â–µ–Ω–∏–µ)

### 7. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ MD3 –º–æ–¥–µ–ª–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω `WgpuMD3Renderer` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - –ó–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ MD3 –º–æ–¥–µ–ª–µ–π
  - –ê–Ω–∏–º–∞—Ü–∏–π (frame-based)
  - –¢–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
  - –û—Å–≤–µ—â–µ–Ω–∏—è (2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞)
  - 3D —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω `md3_shader.wgsl` –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ 3D –º–æ–¥–µ–ª–µ–π

## –í –ø—Ä–æ—Ü–µ—Å—Å–µ üîÑ

### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–æ–¥–µ–ª–µ–π MD3
- ‚úÖ –°–æ–∑–¥–∞–Ω `WgpuMD3Renderer` –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ MD3 –º–æ–¥–µ–ª–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω `md3_shader.wgsl` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - 3D —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
  - –û—Å–≤–µ—â–µ–Ω–∏—è (–¥–æ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–≤–µ—Ç–∞)
  - –¢–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ù–æ—Ä–º–∞–ª–µ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π (frame-based)
- ‚è≥ –ù—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ game_loop
- ‚è≥ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤

### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–π–ª–æ–≤ –∏ –∫–∞—Ä—Ç—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω `WgpuTileRenderer` –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–∞–π–ª–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω WGSL —à–µ–π–¥–µ—Ä –¥–ª—è —Ç–∞–π–ª–æ–≤
- ‚è≥ –ù—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ game_loop
- ‚è≥ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å batching –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–µ–∫—Å—Ç—É—Ä

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ üìã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ game_loop ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
1. ‚úÖ –°–æ–∑–¥–∞–Ω `WgpuRenderContext` –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/game_loop.rs` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è wgpu renderer
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `render_wgpu()` –º–µ—Ç–æ–¥ –≤ `GameState`
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `use_wgpu` –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ–∂–¥—É macroquad –∏ wgpu
5. ‚úÖ –°–æ–∑–¥–∞–Ω `main_wgpu_full.rs` –¥–ª—è –ø–æ–ª–Ω–æ–π wgpu –≤–µ—Ä—Å–∏–∏
6. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ uniform –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
7. ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç—É—Ä —Ç–∞–π–ª–æ–≤ –∏–∑ macroquad –≤ wgpu
8. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `GameLoop::set_wgpu_renderer()` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ renderer
9. ‚úÖ Fallback –Ω–∞ macroquad –µ—Å–ª–∏ wgpu renderer –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
10. ‚úÖ Wgpu –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`use_wgpu = true`)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥–µ–æ–º–µ—Ç—Ä–∏–∏
1. –°–æ–∑–¥–∞—Ç—å WGSL —à–µ–π–¥–µ—Ä—ã –¥–ª—è:
   - –¢–∞–π–ª–æ–≤ –∫–∞—Ä—Ç—ã
   - MD3 –º–æ–¥–µ–ª–µ–π
   - –ß–∞—Å—Ç–∏—Ü
   - UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å batching –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ draw calls

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –¢–µ–∫—Å—Ç—É—Ä—ã –∏ —Ä–µ—Å—É—Ä—Å—ã
1. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç—É—Ä—ã –∏–∑ macroquad –≤ wgpu
2. –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞—Ç–ª–∞—Å –¥–ª—è —Ç–∞–π–ª–æ–≤
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
1. Cartoon shader –Ω–∞ wgpu
2. Bloom —ç—Ñ—Ñ–µ–∫—Ç—ã
3. –î—Ä—É–≥–∏–µ –ø–æ—Å—Ç—ç—Ñ—Ñ–µ–∫—Ç—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          WgpuRenderer                   ‚îÇ
‚îÇ  (device, queue, surface, camera)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚îú‚îÄ‚îÄ> WgpuDeferredRenderer
               ‚îÇ    ‚îú‚îÄ> Scene render target
               ‚îÇ    ‚îú‚îÄ> Lightmap (wgpu)
               ‚îÇ    ‚îú‚îÄ> Dynamic lights
               ‚îÇ    ‚îú‚îÄ> Obstacle texture
               ‚îÇ    ‚îî‚îÄ> Lighting pipeline
               ‚îÇ
               ‚îú‚îÄ‚îÄ> RenderPipeline
               ‚îÇ    ‚îú‚îÄ> Lighting shader (WGSL)
               ‚îÇ    ‚îî‚îÄ> Bind group layouts
               ‚îÇ
               ‚îî‚îÄ‚îÄ> WgpuTexture
                    ‚îú‚îÄ> Texture creation
                    ‚îú‚îÄ> Image loading
                    ‚îî‚îÄ> Updates
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–æ:
- **17 —Ñ–∞–π–ª–æ–≤** –≤ `src/wgpu_renderer/` + `src/game/wgpu_render.rs`
- **~2289 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞** (Rust + WGSL)
- **3 WGSL —à–µ–π–¥–µ—Ä–∞**: lighting, tile, md3
- **11 –º–æ–¥—É–ª–µ–π Rust**: renderer, texture, camera, mesh, deferred_renderer, pipeline, uniforms, tile_renderer, md3_renderer, integration, wgpu_render
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ GameState –∏ GameLoop
- **–§–ª–∞–≥ use_wgpu**: –î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É macroquad –∏ wgpu

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **GPU batching**: –ú–µ–Ω—å—à–µ draw calls —á–µ—Ä–µ–∑ instancing
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —à–µ–π–¥–µ—Ä—ã**: WGSL –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö GPU
- **–õ—É—á—à–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**: –ü—Ä—è–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –±—É—Ñ–µ—Ä–∞–º–∏
- **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ú–µ–Ω—å—à–µ overhead**: –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Å–ª–æ—è macroquad
- **Deferred rendering**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- 60+ FPS –ø—Ä–∏ 1080p
- 144+ FPS –ø—Ä–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4K/8K —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –°—Ä–∞–≤–Ω–∏–º–æ —Å q3e –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç macroquad –¥–ª—è:
- –ê—É–¥–∏–æ —Å–∏—Å—Ç–µ–º—ã
- –°—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ –∏–≥—Ä—ã
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ macroquad –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª–∏—Ç—å.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (—Å—Ä–∞–≤–Ω–∏—Ç—å —Å macroquad –≤–µ—Ä—Å–∏–µ–π)
2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (FPS, frame time)
3. –ü–∞–º—è—Ç—å (GPU memory usage)
4. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—Ä–∞–∑–Ω—ã–µ GPU, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
cargo check --lib

# –°–±–æ—Ä–∫–∞ release –≤–µ—Ä—Å–∏–∏
cargo build --release

# –ó–∞–ø—É—Å–∫ –æ–±—ã—á–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (macroquad —Å fallback)
cargo run --release

# –ó–∞–ø—É—Å–∫ wgpu –≤–µ—Ä—Å–∏–∏ (–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ winit)
cargo run --release --bin sas_wgpu_full
```

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è wgpu renderer

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ main_wgpu_full.rs (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `main_wgpu_full.rs` –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ wgpu —á–µ—Ä–µ–∑ winit.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ GameLoop::set_wgpu_renderer()
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ winit window, –ø–µ—Ä–µ–¥–∞–π—Ç–µ –µ–≥–æ –≤ GameLoop:
```rust
let wgpu_renderer = WgpuRenderer::new(window).await?;
game_loop.set_wgpu_renderer(wgpu_renderer);
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Fallback –Ω–∞ macroquad (—Ç–µ–∫—É—â–∏–π)
–ï—Å–ª–∏ wgpu renderer –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç macroquad —Ä–µ–Ω–¥–µ—Ä–µ—Ä. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `main.rs` –±–µ–∑ —è–≤–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ wgpu_renderer.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `main_wgpu_full.rs` –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ wgpu_renderer —á–µ—Ä–µ–∑ `GameLoop::set_wgpu_renderer()`.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∫–ª—é—á–µ–Ω–∏–µ wgpu —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞:
‚úÖ **–í–∫–ª—é—á–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (`use_wgpu = true` –≤ `GameState::new()`)

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `game_state.use_wgpu = false`.

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ GameState –∏ GameLoop
- ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–π–ª–æ–≤ –Ω–∞ wgpu
- ‚úÖ Deferred rendering —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MD3 –º–æ–¥–µ–ª–µ–π
- ‚úÖ Wgpu –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`use_wgpu = true`)
- ‚úÖ Fallback –Ω–∞ macroquad –µ—Å–ª–∏ wgpu renderer –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ú–µ—Ç–æ–¥ `GameLoop::set_wgpu_renderer()` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ renderer
- ‚úÖ `main_wgpu_full.rs` –¥–ª—è –ø–æ–ª–Ω–æ–π winit –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚è≥ –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å `main.rs` (macroquad) –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å wgpu_renderer —á–µ—Ä–µ–∑ `GameLoop::set_wgpu_renderer()`
- ‚è≥ –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–∏–≥—Ä–æ–∫–∏, —á–∞—Å—Ç–∏—Ü—ã, UI, HUD)
- ‚è≥ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –±—É—Ñ–µ—Ä–æ–≤ –¥–ª—è MD3 –º–æ–¥–µ–ª–µ–π

